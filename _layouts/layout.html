<!DOCTYPE html>
<html>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.name }}</title>

	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="{{ site.twitter }}">
	<meta name="twitter:creator" content="{{ site.twitter }}">
	{% if page.title %}
	  <meta name="twitter:title" content="{{ page.title }}">
	{% else %}
	  <meta name="twitter:title" content="{{ site.title }}">
	{% endif %}
	{% if page.url %}
	  <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
	{% endif %}
	{% if page.description %}
	  <meta name="twitter:description" content="{{ page.description }}">
	{% else %}
	  <meta name="twitter:description" content="{{ site.description }}">
	{% endif %}
	{% if page.image %}
	  <meta name="twitter:image:src" content="{{ page.image }}">
	{% else %}
	  <meta name="twitter:image:src" content="{{ site.url }}/img/threeofus.jpg">
	{% endif %}

	<link href='https://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
  	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>
<body>
<nav>
	<div class="hamburger" aria-role="button" tabindex="0">
	  <span></span>
	  <span></span>
	  <span></span>
	  <span></span>
	</div>
	<div class="mobile-title">
		<h1>{{ site.name }}</h1>
	</div>
	<div class="menu">
		<a href="/"><img src="{{ site.gravatar_url }}?s=150" height="80" width="80" class="avatar" alt=""/></a>
		<ul>
			<li><a href="/about">About</a></li>
			<li><a href="/">Blog</a></li>
			<li><a href="/resume">R&eacute;sum&eacute;</a></li>
      <li><a href="/tag/Tale">Tales</a></li>
		</ul>
		<div class="social_media">
			<div>
				<a href="https://twitter.com/{{ site.twitter }}" class="sprite sprite-twitter">
					<span class="invisible">Follow me on Twitter</span>
				</a>
				<a href="https://www.goodreads.com/{{ site.goodreads }}" class="sprite sprite-goodreads">
					<span class="invisible">See what I'm reading on Goodreads</span>
				</a>
			</div>
			<div>
				<a href="https://github.com/{{ site.github }}" class="sprite sprite-github">
					<span class="invisible">Check out my GitHub</span>
				</a>
				<a href="https://www.linkedin.com/in/{{ site.linkedin }}" class="sprite sprite-linkedin">
					<span class="invisible">Connect with me on LinkedIn</span>
				</a>
			</div>
		</div>
	</div>
</nav>
<section class="main">
	{% if page.topTitle %}
		<h1 class='top-title'>{{ page.topTitle }}</h1>
	{% endif %}
{{ content }}
<span class="copy-notice">&copy;2016 {{ site.name }} <a href="/copyright">some rights reserved</a></span>
</section>
<script>
var burger = document.getElementsByClassName('hamburger')[0];
burger.addEventListener('click', function(e){
	burger.classList.toggle('open');
	document.getElementsByClassName('menu')[0].classList.toggle('open');
});

// Show side/foot notes if avaialble.
var s = document.getElementsByClassName('note');
for(var i=0;i<s.length;i++){
  s[i].addEventListener('click', function(event){
    var targetNumber = event.target.textContent;
    var possibles = document.getElementsByClassName('note-number');
    for(var j=0;j<possibles.length;j++){
      if(possibles[j].textContent.substring(0, 1) == targetNumber){
        // check background color to make sure we're not getting clicked on while on wide mode
        styles = window.getComputedStyle(possibles[j].parentElement);
        if(styles.getPropertyValue('display') != 'block' && styles.getPropertyValue('background-color') != 'transparent'){
          possibles[j].parentElement.style.display = 'block';
          possibles[j].parentElement.style.left = event.clientX + "px";
        }
      }
    }
  });
}

//and then close them again
var notes = document.getElementsByClassName('sidenote');
for(var i=0;i<notes.length;i++){
  notes[i].addEventListener('click', function(event){
    event.target.style.display = null;
  });
}

// remove left when switching to side notes. test an element first, to see if it's time
window.addEventListener('resize', function(){
  var notes = document.getElementsByClassName('sidenote');
  var testNote = document.getElementsByClassName('note-number');
  styles = window.getComputedStyle(testNote[0]);
  if(styles.getPropertyValue('display') == 'inline'){
    for(var i=0;i<notes.length;i++){
      notes[i].style.left = null;
    }
  }
});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '{{ site.google_analytics }}', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
</body>
</html>
